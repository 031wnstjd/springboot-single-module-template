# ===================================================
# 공통 애플리케이션 설정
# ===================================================
# 이 파일은 모든 환경에서 공유되는 기본 설정을 정의합니다.
# 환경별 세부 설정은 application-{profile}.yml 파일에서 오버라이드됩니다.
# ===================================================

spring:
  profiles:
    # 기본 활성 프로파일 (로컬 개발 환경)
    active: local

  application:
    # 애플리케이션 이름 (로깅, 모니터링에서 사용)
    name: springboot-single-module-template

  # ===================================================
  # Jackson JSON 설정
  # ===================================================
  jackson:
    # null 값은 JSON 응답에서 제외
    default-property-inclusion: non_null
    serialization:
      # 날짜를 ISO 8601 형식 문자열로 직렬화 (타임스탬프 대신)
      write_dates_as_timestamps: false

  # ===================================================
  # JPA 자동 설정 비활성화
  # ===================================================
  # Multi-DB 환경에서는 수동으로 DataSource를 구성하므로
  # Spring Boot의 자동 설정을 비활성화합니다.
  # ===================================================
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

  # ===================================================
  # OpenFeign (Spring Cloud) 설정
  # ===================================================
  cloud:
    openfeign:
      client:
        config:
          default:
            # 연결 타임아웃 (밀리초)
            connect-timeout: 5000
            # 읽기 타임아웃 (밀리초)
            read-timeout: 10000

# ===================================================
# 서버 설정
# ===================================================
server:
  port: 8080
  servlet:
    context-path: /

# ===================================================
# Spring Actuator 설정 (모니터링)
# ===================================================
# Actuator는 애플리케이션의 상태, 메트릭, 환경 정보 등을 제공합니다.
# ===================================================
management:
  endpoints:
    web:
      exposure:
        # 노출할 엔드포인트 (운영에서는 필요한 것만 노출 권장)
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      # 상세 헬스 정보 표시 (always: 항상, never: 안함, when_authorized: 인증 시)
      show-details: when_authorized
      # 헬스 체크에 DB 연결 상태 포함
      show-components: always
  info:
    env:
      enabled: true
  # Prometheus 메트릭 노출 (Grafana 연동용)
  prometheus:
    metrics:
      export:
        enabled: true

# ===================================================
# 애플리케이션 정보 (Actuator /info 엔드포인트)
# ===================================================
info:
  app:
    name: ${spring.application.name}
    version: "@project.version@"
    description: "Spring Boot Single Module Template"

# ===================================================
# 외부 API URL 설정
# ===================================================
# OpenFeign 클라이언트에서 참조하는 외부 API URL입니다.
# 환경별로 오버라이드할 수 있습니다.
# ===================================================
external:
  api:
    sample:
      url: https://jsonplaceholder.typicode.com

# ===================================================
# 로깅 설정
# ===================================================
# 상세 로깅 설정은 logback-spring.xml에서 관리합니다.
# ===================================================
logging:
  config: classpath:logback-spring.xml
